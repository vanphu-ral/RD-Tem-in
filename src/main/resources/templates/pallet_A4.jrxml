<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
               name="Pallet_A4" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="800" leftMargin="21" rightMargin="21" topMargin="20" bottomMargin="20" uuid="b5a3e0b2-1b1a-4d2f-9e1e-1234567890ab">

    <!-- Styles matching Angular component CSS -->
    <style name="BaseStyle" isDefault="true" fontName="Arial" fontSize="11" pdfEncoding="Identity-H" isPdfEmbedded="true"/>
    <style name="BoldStyle" style="BaseStyle" isBold="true"/>
    <style name="TitleStyle" style="BoldStyle" fontSize="28" isBold="true"/>
    <style name="LabelStyle" style="BoldStyle" fontSize="12" forecolor="#000000" backcolor="#F5F5F5"/>
    <style name="ValueStyle" style="BaseStyle" fontSize="11" forecolor="#000000"/>
    <style name="NoteStyle" style="BaseStyle" fontSize="10" forecolor="#000000"/>
    <style name="PoNumberStyle" style="BoldStyle" fontSize="30" isBold="true"/>
    <style name="BoldLargeStyle" style="BoldStyle" fontSize="20" isBold="true"/>

    <!-- Fields from PrintPalletDTO -->
    <field name="id" class="java.lang.Long"/>
    <field name="khachHang" class="java.lang.String"/>
    <field name="serialPallet" class="java.lang.String"/>
    <field name="tenSanPham" class="java.lang.String"/>
    <field name="poNumber" class="java.lang.String"/>
    <field name="itemNoSku" class="java.lang.String"/>
    <field name="nganh" class="java.lang.String"/>
    <field name="led2" class="java.lang.String"/>
    <field name="soQdsx" class="java.lang.String"/>
    <field name="lpl2" class="java.lang.String"/>
    <field name="ngaySanXuat" class="java.lang.String"/>
    <field name="dateCode" class="java.lang.String"/>
    <field name="soLuongCaiDatPallet" class="java.lang.Integer"/>
    <field name="thuTuGiaPallet" class="java.lang.Integer"/>
    <field name="soLuongBaoNgoaiThungGiaPallet" class="java.lang.String"/>
    <field name="slThung" class="java.lang.Integer"/>
    <field name="note" class="java.lang.String"/>
    <field name="nguoiKiemTra" class="java.lang.String"/>
    <field name="ketQuaKiemTra" class="java.lang.String"/>
    <field name="productCode" class="java.lang.String"/>
    <field name="serialBox" class="java.lang.String"/>
    <field name="qty" class="java.lang.Integer"/>
    <field name="lot" class="java.lang.String"/>
    <field name="date" class="java.lang.String"/>
    <field name="productType" class="java.lang.String"/>
    <field name="version" class="java.lang.String"/>
    <field name="maSAP" class="java.lang.String"/>
    <field name="woId" class="java.lang.String"/>
    <field name="maLenhSanXuat" class="java.lang.String"/>
    <field name="totalProductsOnPallet" class="java.lang.Integer"/>
    <field name="to" class="java.lang.String"/>

    <detail>
        <band height="270" splitType="Stretch">
            <!-- Left Pallet Card -->
            <band height="270" width="390">
                <!-- Border rectangle -->
                <rectangle>
                    <reportElement x="0" y="0" width="390" height="270" uuid="border-rect-left"/>
                    <graphicElement>
                        <pen lineWidth="2" lineColor="#000000"/>
                    </graphicElement>
                </rectangle>
                
                <!-- Bán thành phẩm (BTP) Layout - shown only for BTP products -->
                <band height="270">
                    <printWhenExpression><![CDATA["Bán thành phẩm".equals($F{productType})]]></printWhenExpression>
                    
                    <!-- Top Section with QR Code and Title -->
                    <band height="45">
                        <componentElement>
                            <reportElement x="10" y="10" width="30" height="30" uuid="qr-main-left"/>
                            <jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                                <jr:codeExpression><![CDATA[$F{serialPallet}]]></jr:codeExpression>
                            </jr:QRCode>
                        </componentElement>
                        
                        <staticText>
                            <reportElement x="50" y="15" width="330" height="25" uuid="title-lbl-left"/>
                            <textElement textAlignment="Center" verticalAlignment="Middle">
                                <font size="28" isBold="true"/>
                            </textElement>
                            <text><![CDATA[PHIẾU THÔNG TIN]]></text>
                        </staticText>
                    </band>
                    
                    <!-- Main Info Table - BTP -->
                    <band height="225">
                        <table>
                            <reportElement x="0" y="50" width="390" height="225" uuid="info-table-left"/>
                            <datasetRun subDataset="btpDataset" uuid="btp-dataset-left">
                                <datasetParameter name="serialPallet">
                                    <datasetParameterExpression><![CDATA[$F{serialPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="tenSanPham">
                                    <datasetParameterExpression><![CDATA[$F{tenSanPham}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="maSAP">
                                    <datasetParameterExpression><![CDATA[$F{maSAP} != null ? $F{maSAP} : $F{productCode}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="khachHang">
                                    <datasetParameterExpression><![CDATA[$F{khachHang}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="version">
                                    <datasetParameterExpression><![CDATA[$F{version} != null ? $F{version} : "N/A"]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soQdsx">
                                    <datasetParameterExpression><![CDATA[$F{soQdsx}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="woId">
                                    <datasetParameterExpression><![CDATA[$F{woId} != null ? $F{woId} : $F{serialPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="nganh">
                                    <datasetParameterExpression><![CDATA[$F{nganh} != null ? $F{nganh} : $F{led2}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="to">
                                    <datasetParameterExpression><![CDATA[$F{to} != null ? $F{to} : $F{lpl2}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ngaySanXuat">
                                    <datasetParameterExpression><![CDATA[$F{ngaySanXuat}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="maLenhSanXuat">
                                    <datasetParameterExpression><![CDATA[$F{maLenhSanXuat} != null ? $F{maLenhSanXuat} : "N/A"]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="thuTuGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{thuTuGiaPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="totalProductsOnPallet">
                                    <datasetParameterExpression><![CDATA[$F{totalProductsOnPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongBaoNgoaiThungGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongBaoNgoaiThungGiaPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongCaiDatPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongCaiDatPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="nguoiKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{nguoiKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ketQuaKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{ketQuaKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="note">
                                    <datasetParameterExpression><![CDATA[$F{note}]]></datasetParameterExpression>
                                </datasetParameter>
                            </datasetRun>
                            <columnGroup uuid="btp-column-group-left">
                                <columnHeader>
                                    <band height="0"/>
                                </columnHeader>
                                <columnFooter>
                                    <band height="0"/>
                                </columnFooter>
                            </columnGroup>
                        </table>
                    </band>
                </band>
                
                <!-- Regular Product Layout - shown only for non-BTP products -->
                <band height="270">
                    <printWhenExpression><![CDATA[!"Bán thành phẩm".equals($F{productType})]]></printWhenExpression>
                    
                    <!-- Top Section with QR Code and Title -->
                    <band height="45">
                        <componentElement>
                            <reportElement x="10" y="10" width="28" height="28" uuid="qr-main-left"/>
                            <jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                                <jr:codeExpression><![CDATA[$F{serialPallet}]]></jr:codeExpression>
                            </jr:QRCode>
                        </componentElement>
                        
                        <staticText>
                            <reportElement x="48" y="15" width="332" height="25" uuid="title-lbl-left"/>
                            <textElement textAlignment="Center" verticalAlignment="Middle">
                                <font size="28" isBold="true"/>
                            </textElement>
                            <text><![CDATA[PHIẾU THÔNG TIN]]></text>
                        </staticText>
                    </band>
                    
                    <!-- Main Info Table -->
                    <band height="180">
                        <table>
                            <reportElement x="0" y="50" width="390" height="180" uuid="info-table-left"/>
                            <datasetRun subDataset="regularDataset" uuid="regular-dataset-left">
                                <datasetParameter name="khachHang">
                                    <datasetParameterExpression><![CDATA[$F{khachHang}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="serialPallet">
                                    <datasetParameterExpression><![CDATA[$F{serialPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="tenSanPham">
                                    <datasetParameterExpression><![CDATA[$F{tenSanPham}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="poNumber">
                                    <datasetParameterExpression><![CDATA[$F{poNumber}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="itemNoSku">
                                    <datasetParameterExpression><![CDATA[$F{itemNoSku}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="led2">
                                    <datasetParameterExpression><![CDATA[$F{led2}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soQdsx">
                                    <datasetParameterExpression><![CDATA[$F{soQdsx}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="to">
                                    <datasetParameterExpression><![CDATA[$F{to}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ngaySanXuat">
                                    <datasetParameterExpression><![CDATA[$F{ngaySanXuat}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="dateCode">
                                    <datasetParameterExpression><![CDATA[$F{dateCode}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongCaiDatPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongCaiDatPallet} != null ? $F{soLuongCaiDatPallet}.toString() : ""]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="slThung">
                                    <datasetParameterExpression><![CDATA[$F{slThung} != null ? $F{slThung}.toString() : ""]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongBaoNgoaiThungGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongBaoNgoaiThungGiaPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="thuTuGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{thuTuGiaPallet} != null ? $F{thuTuGiaPallet}.toString() : ""]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="nguoiKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{nguoiKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ketQuaKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{ketQuaKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="note">
                                    <datasetParameterExpression><![CDATA[$F{note}]]></datasetParameterExpression>
                                </datasetParameter>
                            </datasetRun>
                            <columnGroup uuid="regular-column-group-left">
                                <columnHeader>
                                    <band height="0"/>
                                </columnHeader>
                                <columnFooter>
                                    <band height="0"/>
                                </columnFooter>
                            </columnGroup>
                        </table>
                    </band>
                    
                    <!-- Bottom Section -->
                    <band height="45">
                        <componentElement>
                            <reportElement x="10" y="10" width="28" height="28" uuid="qr-small-left"/>
                            <jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                                <jr:codeExpression><![CDATA[$F{serialBox}]]></jr:codeExpression>
                            </jr:QRCode>
                        </componentElement>
                        
                        <textField>
                            <reportElement x="48" y="10" width="332" height="12" uuid="val-f1-left"/>
                            <textElement><font size="10" isBold="true"/></textElement>
                            <textFieldExpression><![CDATA["Product Code: " + ($F{productCode} != null ? $F{productCode} : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="48" y="25" width="332" height="12" uuid="val-f2-left"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Serial Box: " + ($F{serialBox} != null ? $F{serialBox} : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="48" y="40" width="100" height="12" uuid="val-f3-left"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Qty: " + ($F{qty} != null ? $F{qty}.toString() : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="150" y="40" width="100" height="12" uuid="val-f4-left"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Lot: " + ($F{lot} != null ? $F{lot} : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="250" y="40" width="130" height="12" uuid="val-f5-left"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Date: " + ($F{date} != null ? $F{date} : "")]]></textFieldExpression>
                        </textField>
                    </band>
                </band>
            </band>

            <!-- Right Pallet Card -->
            <band x="430" y="0" height="270" width="390">
                <!-- Border rectangle -->
                <rectangle>
                    <reportElement x="0" y="0" width="390" height="270" uuid="border-rect-right"/>
                    <graphicElement>
                        <pen lineWidth="2" lineColor="#000000"/>
                    </graphicElement>
                </rectangle>
                
                <!-- Bán thành phẩm (BTP) Layout - shown only for BTP products -->
                <band height="270">
                    <printWhenExpression><![CDATA["Bán thành phẩm".equals($F{productType})]]></printWhenExpression>
                    
                    <!-- Top Section with QR Code and Title -->
                    <band height="45">
                        <componentElement>
                            <reportElement x="10" y="10" width="30" height="30" uuid="qr-main-right"/>
                            <jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                                <jr:codeExpression><![CDATA[$F{serialPallet}]]></jr:codeExpression>
                            </jr:QRCode>
                        </componentElement>
                        
                        <staticText>
                            <reportElement x="50" y="15" width="330" height="25" uuid="title-lbl-right"/>
                            <textElement textAlignment="Center" verticalAlignment="Middle">
                                <font size="28" isBold="true"/>
                            </textElement>
                            <text><![CDATA[PHIẾU THÔNG TIN]]></text>
                        </staticText>
                    </band>
                    
                    <!-- Main Info Table - BTP -->
                    <band height="225">
                        <table>
                            <reportElement x="0" y="50" width="390" height="225" uuid="info-table-right"/>
                            <datasetRun subDataset="btpDataset" uuid="btp-dataset-right">
                                <datasetParameter name="serialPallet">
                                    <datasetParameterExpression><![CDATA[$F{serialPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="tenSanPham">
                                    <datasetParameterExpression><![CDATA[$F{tenSanPham}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="maSAP">
                                    <datasetParameterExpression><![CDATA[$F{maSAP} != null ? $F{maSAP} : $F{productCode}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="khachHang">
                                    <datasetParameterExpression><![CDATA[$F{khachHang}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="version">
                                    <datasetParameterExpression><![CDATA[$F{version} != null ? $F{version} : "N/A"]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soQdsx">
                                    <datasetParameterExpression><![CDATA[$F{soQdsx}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="woId">
                                    <datasetParameterExpression><![CDATA[$F{woId} != null ? $F{woId} : $F{serialPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="nganh">
                                    <datasetParameterExpression><![CDATA[$F{nganh} != null ? $F{nganh} : $F{led2}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="to">
                                    <datasetParameterExpression><![CDATA[$F{to} != null ? $F{to} : $F{lpl2}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ngaySanXuat">
                                    <datasetParameterExpression><![CDATA[$F{ngaySanXuat}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="maLenhSanXuat">
                                    <datasetParameterExpression><![CDATA[$F{maLenhSanXuat} != null ? $F{maLenhSanXuat} : "N/A"]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="thuTuGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{thuTuGiaPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="totalProductsOnPallet">
                                    <datasetParameterExpression><![CDATA[$F{totalProductsOnPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongBaoNgoaiThungGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongBaoNgoaiThungGiaPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongCaiDatPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongCaiDatPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="nguoiKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{nguoiKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ketQuaKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{ketQuaKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="note">
                                    <datasetParameterExpression><![CDATA[$F{note}]]></datasetParameterExpression>
                                </datasetParameter>
                            </datasetRun>
                            <columnGroup uuid="btp-column-group-right">
                                <columnHeader>
                                    <band height="0"/>
                                </columnHeader>
                                <columnFooter>
                                    <band height="0"/>
                                </columnFooter>
                            </columnGroup>
                        </table>
                    </band>
                </band>
                
                <!-- Regular Product Layout - shown only for non-BTP products -->
                <band height="270">
                    <printWhenExpression><![CDATA[!"Bán thành phẩm".equals($F{productType})]]></printWhenExpression>
                    
                    <!-- Top Section with QR Code and Title -->
                    <band height="45">
                        <componentElement>
                            <reportElement x="10" y="10" width="28" height="28" uuid="qr-main-right"/>
                            <jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                                <jr:codeExpression><![CDATA[$F{serialPallet}]]></jr:codeExpression>
                            </jr:QRCode>
                        </componentElement>
                        
                        <staticText>
                            <reportElement x="48" y="15" width="332" height="25" uuid="title-lbl-right"/>
                            <textElement textAlignment="Center" verticalAlignment="Middle">
                                <font size="28" isBold="true"/>
                            </textElement>
                            <text><![CDATA[PHIẾU THÔNG TIN]]></text>
                        </staticText>
                    </band>
                    
                    <!-- Main Info Table -->
                    <band height="180">
                        <table>
                            <reportElement x="0" y="50" width="390" height="180" uuid="info-table-right"/>
                            <datasetRun subDataset="regularDataset" uuid="regular-dataset-right">
                                <datasetParameter name="khachHang">
                                    <datasetParameterExpression><![CDATA[$F{khachHang}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="serialPallet">
                                    <datasetParameterExpression><![CDATA[$F{serialPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="tenSanPham">
                                    <datasetParameterExpression><![CDATA[$F{tenSanPham}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="poNumber">
                                    <datasetParameterExpression><![CDATA[$F{poNumber}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="itemNoSku">
                                    <datasetParameterExpression><![CDATA[$F{itemNoSku}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="led2">
                                    <datasetParameterExpression><![CDATA[$F{led2}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soQdsx">
                                    <datasetParameterExpression><![CDATA[$F{soQdsx}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="to">
                                    <datasetParameterExpression><![CDATA[$F{to}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ngaySanXuat">
                                    <datasetParameterExpression><![CDATA[$F{ngaySanXuat}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="dateCode">
                                    <datasetParameterExpression><![CDATA[$F{dateCode}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongCaiDatPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongCaiDatPallet} != null ? $F{soLuongCaiDatPallet}.toString() : ""]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="slThung">
                                    <datasetParameterExpression><![CDATA[$F{slThung} != null ? $F{slThung}.toString() : ""]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="soLuongBaoNgoaiThungGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{soLuongBaoNgoaiThungGiaPallet}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="thuTuGiaPallet">
                                    <datasetParameterExpression><![CDATA[$F{thuTuGiaPallet} != null ? $F{thuTuGiaPallet}.toString() : ""]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="nguoiKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{nguoiKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="ketQuaKiemTra">
                                    <datasetParameterExpression><![CDATA[$F{ketQuaKiemTra}]]></datasetParameterExpression>
                                </datasetParameter>
                                <datasetParameter name="note">
                                    <datasetParameterExpression><![CDATA[$F{note}]]></datasetParameterExpression>
                                </datasetParameter>
                            </datasetRun>
                            <columnGroup uuid="regular-column-group-right">
                                <columnHeader>
                                    <band height="0"/>
                                </columnHeader>
                                <columnFooter>
                                    <band height="0"/>
                                </columnFooter>
                            </columnGroup>
                        </table>
                    </band>
                    
                    <!-- Bottom Section -->
                    <band height="45">
                        <componentElement>
                            <reportElement x="10" y="10" width="28" height="28" uuid="qr-small-right"/>
                            <jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                                <jr:codeExpression><![CDATA[$F{serialBox}]]></jr:codeExpression>
                            </jr:QRCode>
                        </componentElement>
                        
                        <textField>
                            <reportElement x="48" y="10" width="332" height="12" uuid="val-f1-right"/>
                            <textElement><font size="10" isBold="true"/></textElement>
                            <textFieldExpression><![CDATA["Product Code: " + ($F{productCode} != null ? $F{productCode} : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="48" y="25" width="332" height="12" uuid="val-f2-right"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Serial Box: " + ($F{serialBox} != null ? $F{serialBox} : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="48" y="40" width="100" height="12" uuid="val-f3-right"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Qty: " + ($F{qty} != null ? $F{qty}.toString() : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="150" y="40" width="100" height="12" uuid="val-f4-right"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Lot: " + ($F{lot} != null ? $F{lot} : "")]]></textFieldExpression>
                        </textField>
                        
                        <textField>
                            <reportElement x="250" y="40" width="130" height="12" uuid="val-f5-right"/>
                            <textElement><font size="10"/></textElement>
                            <textFieldExpression><![CDATA["Date: " + ($F{date} != null ? $F{date} : "")]]></textFieldExpression>
                        </textField>
                    </band>
                </band>
            </band>
        </band>
    </detail>
    
    <!-- Subdataset for Bán thành phẩm layout -->
    <subDataset name="btpDataset" uuid="btp-dataset-uuid">
        <parameter name="serialPallet" class="java.lang.String"/>
        <parameter name="tenSanPham" class="java.lang.String"/>
        <parameter name="maSAP" class="java.lang.String"/>
        <parameter name="khachHang" class="java.lang.String"/>
        <parameter name="version" class="java.lang.String"/>
        <parameter name="soQdsx" class="java.lang.String"/>
        <parameter name="woId" class="java.lang.String"/>
        <parameter name="nganh" class="java.lang.String"/>
        <parameter name="to" class="java.lang.String"/>
        <parameter name="ngaySanXuat" class="java.lang.String"/>
        <parameter name="maLenhSanXuat" class="java.lang.String"/>
        <parameter name="thuTuGiaPallet" class="java.lang.String"/>
        <parameter name="totalProductsOnPallet" class="java.lang.String"/>
        <parameter name="soLuongBaoNgoaiThungGiaPallet" class="java.lang.String"/>
        <parameter name="soLuongCaiDatPallet" class="java.lang.String"/>
        <parameter name="nguoiKiemTra" class="java.lang.String"/>
        <parameter name="ketQuaKiemTra" class="java.lang.String"/>
        <parameter name="note" class="java.lang.String"/>
        
        <queryString>
            <![CDATA[]]>
        </queryString>
        
        <field name="label" class="java.lang.String"/>
        <field name="value" class="java.lang.String"/>
        <field name="colspan" class="java.lang.Integer"/>
        
        <detail>
            <band height="30">
                <textField>
                    <reportElement x="0" y="0" width="78" height="30" style="LabelStyle"/>
                    <textFieldExpression><![CDATA[$F{label}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="78" y="0" width="103" height="30" style="ValueStyle"/>
                    <textFieldExpression><![CDATA[$F{value}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="181" y="0" width="78" height="30" style="LabelStyle"/>
                    <textFieldExpression><![CDATA[$F{label}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="259" y="0" width="131" height="30" style="ValueStyle"/>
                    <textFieldExpression><![CDATA[$F{value}]]></textFieldExpression>
                </textField>
            </band>
        </detail>
    </subDataset>
    
    <!-- Data provider for Bán thành phẩm layout -->
    <subDataset name="btpDataProvider" uuid="btp-data-provider-uuid">
        <parameter name="serialPallet" class="java.lang.String"/>
        <parameter name="tenSanPham" class="java.lang.String"/>
        <parameter name="maSAP" class="java.lang.String"/>
        <parameter name="khachHang" class="java.lang.String"/>
        <parameter name="version" class="java.lang.String"/>
        <parameter name="soQdsx" class="java.lang.String"/>
        <parameter name="woId" class="java.lang.String"/>
        <parameter name="nganh" class="java.lang.String"/>
        <parameter name="to" class="java.lang.String"/>
        <parameter name="ngaySanXuat" class="java.lang.String"/>
        <parameter name="maLenhSanXuat" class="java.lang.String"/>
        <parameter name="thuTuGiaPallet" class="java.lang.String"/>
        <parameter name="totalProductsOnPallet" class="java.lang.String"/>
        <parameter name="soLuongBaoNgoaiThungGiaPallet" class="java.lang.String"/>
        <parameter name="soLuongCaiDatPallet" class="java.lang.String"/>
        <parameter name="nguoiKiemTra" class="java.lang.String"/>
        <parameter name="ketQuaKiemTra" class="java.lang.String"/>
        <parameter name="note" class="java.lang.String"/>
        
        <queryString>
            <![CDATA[]]>
        </queryString>
        
        <field name="label" class="java.lang.String"/>
        <field name="value" class="java.lang.String"/>
        <field name="colspan" class="java.lang.Integer"/>
        
        <detail>
            <band height="30">
                <textField>
                    <reportElement x="0" y="0" width="78" height="30" style="LabelStyle"/>
                    <textFieldExpression><![CDATA[$F{label}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="78" y="0" width="103" height="30" style="ValueStyle"/>
                    <textFieldExpression><![CDATA[$F{value}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="181" y="0" width="78" height="30" style="LabelStyle"/>
                    <textFieldExpression><![CDATA[$F{label}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="259" y="0" width="131" height="30" style="ValueStyle"/>
                    <textFieldExpression><![CDATA[$F{value}]]></textFieldExpression>
                </textField>
            </band>
        </detail>
    </subDataset>
    
    <!-- Subdataset for regular product layout -->
    <subDataset name="regularDataset" uuid="regular-dataset-uuid">
        <parameter name="khachHang" class="java.lang.String"/>
        <parameter name="serialPallet" class="java.lang.String"/>
        <parameter name="tenSanPham" class="java.lang.String"/>
        <parameter name="poNumber" class="java.lang.String"/>
        <parameter name="itemNoSku" class="java.lang.String"/>
        <parameter name="led2" class="java.lang.String"/>
        <parameter name="soQdsx" class="java.lang.String"/>
        <parameter name="to" class="java.lang.String"/>
        <parameter name="ngaySanXuat" class="java.lang.String"/>
        <parameter name="dateCode" class="java.lang.String"/>
        <parameter name="soLuongCaiDatPallet" class="java.lang.String"/>
        <parameter name="slThung" class="java.lang.String"/>
        <parameter name="soLuongBaoNgoaiThungGiaPallet" class="java.lang.String"/>
        <parameter name="thuTuGiaPallet" class="java.lang.String"/>
        <parameter name="nguoiKiemTra" class="java.lang.String"/>
        <parameter name="ketQuaKiemTra" class="java.lang.String"/>
        <parameter name="note" class="java.lang.String"/>
        
        <queryString>
            <![CDATA[]]>
        </queryString>
        
        <field name="label" class="java.lang.String"/>
        <field name="value" class="java.lang.String"/>
        <field name="colspan" class="java.lang.Integer"/>
        
        <detail>
            <band height="30">
                <textField>
                    <reportElement x="0" y="0" width="124" height="30" style="LabelStyle"/>
                    <textFieldExpression><![CDATA[$F{label}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="124" y="0" width="266" height="30" style="ValueStyle"/>
                    <textFieldExpression><![CDATA[$F{value}]]></textFieldExpression>
                </textField>
            </band>
        </detail>
    </subDataset>
   </jasperReport>
